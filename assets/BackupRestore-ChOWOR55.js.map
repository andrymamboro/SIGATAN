{"version":3,"file":"BackupRestore-ChOWOR55.js","sources":["../../Pages/BackupRestore.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { toast } from \"sonner\";\r\n\r\nexport default function BackupRestore() {\r\n  const [backupFilename, setBackupFilename] = useState(\"\");\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n\r\n  React.useEffect(() => {\r\n    // Cek user dari localStorage, hanya admin yang boleh akses\r\n    const userStr = localStorage.getItem(\"user\");\r\n    if (userStr) {\r\n      try {\r\n        const user = JSON.parse(userStr);\r\n        setIsAdmin(user.role === \"admin\");\r\n      } catch {\r\n        setIsAdmin(false);\r\n      }\r\n    } else {\r\n      setIsAdmin(false);\r\n    }\r\n  }, []);\r\n\r\n  if (!isAdmin) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center text-red-600 font-bold text-xl\">\r\n          Akses hanya untuk admin\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-xl mx-auto py-10 space-y-8\">\r\n      <h1 className=\"text-3xl font-bold mb-4\">Backup & Restore Database</h1>\r\n         <div className=\"flex gap-2 items-center mb-4\">\r\n           <Button\r\n             type=\"button\"\r\n             variant=\"outline\"\r\n             className=\"border-green-600 text-green-600 hover:bg-green-50\"\r\n             onClick={() => {\r\n               window.open(`/api/backup-db-pg.php`, '_blank');\r\n             }}\r\n           >\r\n             Backup SQL (Postgres)\r\n           </Button>\r\n         </div>\r\n      <form\r\n        onSubmit={async (e) => {\r\n          e.preventDefault();\r\n          const fileInput = e.target.elements.restorefile;\r\n          if (!fileInput.files[0]) return;\r\n          const formData = new FormData();\r\n          formData.append('sqlfile', fileInput.files[0]);\r\n          const res = await fetch('/api/restore-db-pg.php', { method: 'POST', body: formData });\r\n          if (res.ok) {\r\n            toast.success('Restore sukses!');\r\n          } else {\r\n            toast.error('Restore gagal!');\r\n          }\r\n        }}\r\n        className=\"flex gap-2 items-center\"\r\n      >\r\n        <input\r\n          type=\"file\"\r\n          name=\"restorefile\"\r\n          accept=\".sql\"\r\n          className=\"border px-2 py-1 rounded text-sm\"\r\n          style={{ minWidth: 180 }}\r\n        />\r\n        <Button type=\"submit\" variant=\"outline\" className=\"border-red-600 text-red-600 hover:bg-red-50\">\r\n          Restore SQL (Postgres)\r\n        </Button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["BackupRestore","backupFilename","setBackupFilename","useState","isAdmin","setIsAdmin","React","useEffect","userStr","localStorage","getItem","user","JSON","parse","role","jsxs","className","children","jsx","Button","type","variant","onClick","window","open","onSubmit","async","e","preventDefault","fileInput","target","elements","restorefile","files","formData","FormData","append","fetch","method","body","ok","toast","success","error","name","accept","style","minWidth"],"mappings":"gIAIA,SAAwBA,IACtB,MAAOC,EAAgBC,GAAqBC,EAAAA,SAAS,KAC9CC,EAASC,GAAcF,EAAAA,UAAS,GAiBvC,OAfAG,EAAMC,UAAU,KAEd,MAAMC,EAAUC,aAAaC,QAAQ,QACrC,GAAIF,EACF,IACE,MAAMG,EAAOC,KAAKC,MAAML,GACxBH,EAAyB,UAAdM,EAAKG,KAClB,CAAA,MACET,GAAW,EACb,MAEAA,GAAW,IAEZ,IAEED,IAWHW,KAAC,MAAA,CAAIC,UAAU,mCACbC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAGF,UAAU,0BAA0BC,SAAA,gCACrCC,IAAC,MAAA,CAAIF,UAAU,+BACbC,SAAAC,EAAAA,IAACC,EAAA,CACCC,KAAK,SACLC,QAAQ,UACRL,UAAU,oDACVM,QAAS,KACPC,OAAOC,KAAK,wBAAyB,WAExCP,SAAA,4BAINF,EAAAA,KAAC,OAAA,CACCU,SAAUC,MAAOC,IACfA,EAAEC,iBACF,MAAMC,EAAYF,EAAEG,OAAOC,SAASC,YACpC,IAAKH,EAAUI,MAAM,GAAI,OACzB,MAAMC,EAAW,IAAIC,SACrBD,EAASE,OAAO,UAAWP,EAAUI,MAAM,WACzBI,MAAM,yBAA0B,CAAEC,OAAQ,OAAQC,KAAML,KAClEM,GACNC,EAAMC,QAAQ,mBAEdD,EAAME,MAAM,mBAGhB3B,UAAU,0BAEVC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACCE,KAAK,OACLwB,KAAK,cACLC,OAAO,OACP7B,UAAU,mCACV8B,MAAO,CAAEC,SAAU,OAErB7B,EAAAA,IAACC,GAAOC,KAAK,SAASC,QAAQ,UAAUL,UAAU,8CAA8CC,SAAA,mCA9ClGC,IAAC,OAAIF,UAAU,gDACbC,eAAC,MAAA,CAAID,UAAU,6CAA6CC,SAAA,6BAmDpE"}