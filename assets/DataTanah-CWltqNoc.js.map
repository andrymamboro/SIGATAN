{"version":3,"file":"DataTanah-CWltqNoc.js","sources":["../../Pages/DataTanah.jsx"],"sourcesContent":["// Contoh: ambil data dari tabel 'Tanah'\r\n// const { data, error } = await supabase.from('Tanah').select('*');\r\nimport React, { useState, useEffect } from 'react';\r\nimport { supabase } from '@/api/supabaseClient';\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\n\r\nimport {\r\n  AlertDialog,\r\n  AlertDialogAction,\r\n  AlertDialogCancel,\r\n  AlertDialogContent,\r\n  AlertDialogDescription,\r\n  AlertDialogFooter,\r\n  AlertDialogHeader,\r\n  AlertDialogTitle,\r\n} from \"@/components/ui/alert-dialog\";\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n} from \"@/components/ui/dialog\";\r\nimport { \r\n  FileText, \r\n  Plus, \r\n  Search, \r\n  Eye, \r\n  Pencil, \r\n  Trash2,\r\n  MapPin,\r\n  User,\r\n  QrCode,\r\n  Printer,\r\n  Map\r\n} from 'lucide-react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { createPageUrl } from '@/utils';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { toast } from 'sonner';\r\n\r\nexport default function DataTanah() {\r\n  // Pagination state\r\n  const [page, setPage] = useState(1);\r\n  const pageSize = 5;\r\n  const [user, setUser] = useState(null);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filterStatus, setFilterStatus] = useState('all');\r\n  const [deleteId, setDeleteId] = useState(null);\r\n  const [qrTanah, setQrTanah] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  // Reset page to 1 when search/filter changes\r\n  useEffect(() => {\r\n    setPage(1);\r\n  }, [searchTerm, filterStatus]);\r\n\r\n\r\n  // Query tanahList from supabase\r\n  const { data: tanahList = [], isLoading, error: tanahError } = useQuery({\r\n    queryKey: ['tanah', user?.kecamatan, user?.kelurahan, user?.role, user?.nik],\r\n    queryFn: async () => {\r\n      if (!user) return [];\r\n      let query = supabase.from('tanah').select('*');\r\n      if (user.role === 'super_admin') {\r\n        // Tidak ada filter\r\n      } else if (user.role === 'admin_kecamatan') {\r\n        query = query.eq('kecamatan', user.kecamatan);\r\n      } else if (user.role === 'admin_kelurahan') {\r\n        query = query.eq('kelurahan', user.kelurahan);\r\n      } else if (user.role === 'member') {\r\n        query = query.or(`nik_pemilik.eq.${user.nik},nik_penerima.eq.${user.nik}`);\r\n      } else {\r\n        // fallback: tidak ada data\r\n        return [];\r\n      }\r\n      query = query.order('created_date', { ascending: false });\r\n      const { data, error } = await query;\r\n      if (error) {\r\n        console.error('Supabase tanah error:', error);\r\n        throw new Error(error.message);\r\n      }\r\n      return data || [];\r\n    },\r\n    enabled: !!user,\r\n  });\r\n\r\n  // Filtered tanah and pagination logic must be after tanahList declaration\r\n  const filteredTanah = tanahList.filter(tanah => {\r\n    const matchSearch = tanah.nama_pemilik?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                        tanah.nama_penerima?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                        tanah.nik_pemilik?.includes(searchTerm) ||\r\n                        tanah.lokasi?.toLowerCase().includes(searchTerm.toLowerCase());\r\n    const matchStatus = filterStatus === 'all' || tanah.status === filterStatus;\r\n    return matchSearch && matchStatus;\r\n  });\r\n  const totalPages = Math.ceil(filteredTanah.length / pageSize);\r\n  const paginatedTanah = filteredTanah.slice((page - 1) * pageSize, page * pageSize);\r\n\r\n  const queryClient = useQueryClient();\r\n\r\n  useEffect(() => {\r\n    // Ambil user aplikasi berdasarkan auth_id Supabase Auth\r\n    const getUser = async () => {\r\n      const { data: { user: authUser } } = await supabase.auth.getUser();\r\n      if (authUser) {\r\n        const { data: userApp } = await supabase\r\n          .from('users')\r\n          .select('*')\r\n          .eq('auth_id', authUser.id)\r\n          .single();\r\n        // Gabungkan data user dari auth dan tabel users\r\n        setUser({\r\n          ...authUser,\r\n          ...userApp\r\n        });\r\n      }\r\n    };\r\n    getUser();\r\n  }, []);\r\n\r\n  // useEffect reset searchTerm & filterStatus dihapus agar input search/filter bisa digunakan\r\n\r\n  // ...existing code...\r\n\r\n  const deleteMutation = useMutation({\r\n    mutationFn: async (id) => {\r\n      const { error } = await supabase.from('tanah').delete().eq('id', id);\r\n      if (error) throw new Error(error.message);\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries(['tanah']);\r\n      setDeleteId(null);\r\n      toast.success('Data tanah berhasil dihapus');\r\n    },\r\n    onError: (error) => {\r\n      toast.error('Gagal menghapus data: ' + (error.message || error));\r\n    },\r\n  });\r\n\r\n  const handleSubmit = (data) => {\r\n    if (editingTanah) {\r\n      updateMutation.mutate({ id: editingTanah.id, data });\r\n    } else {\r\n      createMutation.mutate({\r\n        ...data,\r\n        kecamatan: data.kecamatan || user?.kecamatan,\r\n        kelurahan: data.kelurahan || user?.kelurahan,\r\n      });\r\n    }\r\n  };\r\n\r\n  // ...existing code...\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-slate-800 flex items-center gap-3\">\r\n            <FileText className=\"w-8 h-8 text-blue-600\" />\r\n            Data Tanah\r\n          </h1>\r\n          <p className=\"text-slate-500 mt-1\">\r\n            Kelola data tanah dan dokumen pertanahan\r\n          </p>\r\n        </div>\r\n        <Button \r\n          onClick={() => navigate('/formtanah')}\r\n          className=\"bg-gradient-to-r from-blue-700 via-blue-800 to-blue-900 text-white shadow hover:brightness-110\"\r\n        >\r\n          <Plus className=\"w-4 h-4 mr-2\" />\r\n          Tambah Data\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Keterangan warna marker */}\r\n      <div className=\"flex items-center gap-4 mt-2\">\r\n        <div className=\"flex items-center gap-2\">\r\n          <span className=\"inline-block w-5 h-5 rounded-full\" style={{ background: '#EAB308', border: '2px solid #fff', boxShadow: '0 2px 5px rgba(0,0,0,0.15)' }}></span>\r\n          <span className=\"text-sm text-slate-700 font-medium\">Selesai</span>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <span className=\"inline-block w-5 h-5 rounded-full\" style={{ background: '#3b82f6', border: '2px solid #fff', boxShadow: '0 2px 5px rgba(0,0,0,0.15)' }}></span>\r\n          <span className=\"text-sm text-slate-700 font-medium\">Proses</span>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <span className=\"inline-block w-5 h-5 rounded-full\" style={{ background: '#ef4444', border: '2px solid #fff', boxShadow: '0 2px 5px rgba(0,0,0,0.15)' }}></span>\r\n          <span className=\"text-sm text-slate-700 font-medium\">Ditolak</span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <Card className=\"border-0 shadow-md\">\r\n        <CardContent className=\"p-4\">\r\n          <div className=\"flex flex-col md:flex-row gap-4\">\r\n            <div className=\"flex-1 relative\">\r\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400\" />\r\n              <Input\r\n                placeholder=\"Cari nama, NIK, atau lokasi...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                className=\"pl-10\"\r\n              />\r\n            </div>\r\n            <Select value={filterStatus} onValueChange={setFilterStatus}>\r\n              <SelectTrigger className=\"w-full md:w-48\">\r\n                <SelectValue placeholder=\"Filter Status\" />\r\n              </SelectTrigger>\r\n              <SelectContent>\r\n                <SelectItem value=\"all\">Semua Status</SelectItem>\r\n                <SelectItem value=\"Proses\">Proses</SelectItem>\r\n                <SelectItem value=\"Selesai\">Selesai</SelectItem>\r\n                <SelectItem value=\"Ditolak\">Ditolak</SelectItem>\r\n              </SelectContent>\r\n            </Select>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Data Grid */}\r\n      {isLoading ? (\r\n        <div className=\"flex justify-center items-center py-12 text-slate-500 text-lg\">Memuat data...</div>\r\n      ) : (\r\n        <div className=\"grid gap-4\">\r\n          <AnimatePresence>\r\n            {paginatedTanah.map((tanah, index) => (\r\n              <motion.div\r\n                key={tanah.id}\r\n                initial={{ opacity: 0, y: 20 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, y: -20 }}\r\n                transition={{ delay: index * 0.05 }}\r\n              >\r\n                <Card className=\"border-0 shadow-md hover:shadow-lg transition-all duration-300\">\r\n                  <CardContent className=\"p-4 md:p-6\">\r\n                    <div className=\"flex flex-col md:flex-row md:items-center gap-4\">\r\n                    {/* Info */}\r\n                    <div className=\"flex-1 space-y-2\">\r\n                      <div className=\"flex items-start justify-between\">\r\n                        <div>\r\n                          <h3 className=\"font-semibold text-lg text-slate-800 flex items-center gap-2\">\r\n                            <User className=\"w-4 h-4 text-blue-600\" />\r\n                            {tanah.nama_pemilik}\r\n                          </h3>\r\n                          <p className=\"text-sm text-slate-500\">NIK: {tanah.nik_pemilik}</p>\r\n                        </div>\r\n                        <Badge \r\n                          className={\r\n                            tanah.status === 'Selesai' ? 'bg-yellow-100 text-yellow-700' :\r\n                            tanah.status === 'Ditolak' ? 'bg-red-100 text-red-700' :\r\n                            'bg-blue-100 text-blue-700'\r\n                          }\r\n                        >\r\n                          {tanah.status || 'Proses'}\r\n                        </Badge>\r\n                      </div>\r\n                      \r\n                      <div className=\"flex flex-wrap gap-4 text-sm text-slate-600\">\r\n                        <div className=\"flex items-center gap-1\">\r\n                          <MapPin className=\"w-4 h-4 text-slate-400\" />\r\n                          {tanah.lokasi}\r\n                        </div>\r\n                        <div>Luas: {tanah.luas_meter % 1 === 0 ? Math.floor(tanah.luas_meter) : tanah.luas_meter.toString().replace('.', ',')} m²</div>\r\n                        <div>Kelurahan: {tanah.kelurahan}</div>\r\n                      </div>\r\n\r\n                      {tanah.nama_penerima && (\r\n                        <div className =\"text-sm text-slate-600\"><strong>\r\n                          <span className=\"font-medium\">Penerima:</span> {tanah.nama_penerima} \r\n                          {tanah.transaksi && <span className=\"text-slate-400 ml-2\">({tanah.transaksi})</span>}</strong>\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Tampilkan location_type jika ada */}\r\n                      {tanah.location_type && (\r\n                        <div className=\"text-xs text-slate-400\">Tipe Lokasi: {tanah.location_type}</div>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Actions */}\r\n                    <div className=\"flex items-center gap-2\">\r\n                      <Link to={createPageUrl('DetailTanah') + `?id=${tanah.id}`}>\r\n                        <Button variant=\"outline\" size=\"sm\" className=\"text-blue-600 border-blue-200 hover:bg-blue-50\">\r\n                          <Eye className=\"w-4 h-4 mr-1\" />\r\n                          Detail\r\n                        </Button>\r\n                      </Link>\r\n                      <Link to={createPageUrl('PetaTanah') + `?id=${tanah.id}`}>\r\n                        <Button variant=\"outline\" size=\"sm\" className={tanah.latitude && tanah.longitude ? \"text-teal-600 border-teal-200 hover:bg-teal-50\" : \"text-slate-400 border-slate-200\"} disabled={!tanah.latitude || !tanah.longitude}>\r\n                          <Map className=\"w-4 h-4 mr-1\" />\r\n                          Peta\r\n                        </Button>\r\n                      </Link>\r\n                      <Button \r\n                        variant=\"outline\" \r\n                        size=\"sm\"\r\n                        onClick={() => navigate(`/formtanah?id=${tanah.id}`)}\r\n                        className=\"text-orange-600 border-orange-200 hover:bg-orange-50\"\r\n                      >\r\n                        <Pencil className=\"w-4 h-4\" />\r\n                      </Button>\r\n                      <Button \r\n                        variant=\"outline\" \r\n                        size=\"sm\"\r\n                        onClick={() => {\r\n                          const valueStr = `${tanah.nama_pemilik} → ${tanah.nama_penerima} (${tanah.transaksi || 'Transaksi'})`;\r\n                          navigate(`/laporan?tanah=${encodeURIComponent(valueStr)}`);\r\n                        }}\r\n                        className=\"text-purple-600 border-purple-200 hover:bg-purple-50\"\r\n                      >\r\n                        <Printer className=\"w-4 h-4\" />\r\n                      </Button>\r\n                      <Button \r\n                        variant=\"outline\" \r\n                        size=\"sm\"\r\n                        onClick={() => setQrTanah(tanah)}\r\n                        className=\"text-green-600 border-green-200 hover:bg-green-50\"\r\n                      >\r\n                        <QrCode className=\"w-4 h-4\" />\r\n                      </Button>\r\n                      <Button \r\n                        variant=\"outline\" \r\n                        size=\"sm\"\r\n                        onClick={() => setDeleteId(tanah.id)}\r\n                        className=\"text-red-600 border-red-200 hover:bg-red-50\"\r\n                      >\r\n                        <Trash2 className=\"w-4 h-4\" />\r\n                      </Button>\r\n                    </div>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            </motion.div>\r\n          ))}\r\n        </AnimatePresence>\r\n\r\n        {filteredTanah.length === 0 && (\r\n          <Card className=\"border-0 shadow-md\">\r\n            <CardContent className=\"p-12 text-center\">\r\n              <FileText className=\"w-12 h-12 text-slate-300 mx-auto mb-4\" />\r\n              <h3 className=\"text-lg font-medium text-slate-600\">Belum ada data tanah</h3>\r\n              <p className=\"text-slate-400 mt-1\">Klik tombol \"Tambah Data\" untuk menambahkan data baru</p>\r\n            </CardContent>\r\n          </Card>\r\n        )}\r\n      </div>\r\n      )}\r\n      {/* Pagination */}\r\n      {totalPages > 1 && (\r\n        <div className=\"flex justify-center items-center gap-2 mt-6\">\r\n          <Button\r\n            onClick={() => setPage(page - 1)}\r\n            disabled={page === 1}\r\n            className=\"px-3 py-1 rounded bg-gradient-to-r from-blue-700 via-blue-800 to-blue-900 text-white disabled:opacity-50\"\r\n          >\r\n            &lt;\r\n          </Button>\r\n          <span className=\"text-sm text-slate-700\">Halaman {page} dari {totalPages}</span>\r\n          <Button\r\n            onClick={() => setPage(page + 1)}\r\n            disabled={page === totalPages}\r\n            className=\"px-3 py-1 rounded bg-gradient-to-r from-blue-700 via-blue-800 to-blue-900 text-white disabled:opacity-50\"\r\n          >\r\n            &gt;\r\n          </Button>\r\n        </div>\r\n      )}\r\n\r\n      {/* Error Handling */}\r\n      {tanahError && (\r\n        <div className=\"p-4 bg-red-100 text-red-700 rounded mb-4\">\r\n          Gagal memuat data tanah: {tanahError.message}\r\n        </div>\r\n      )}\r\n\r\n      {/* Delete Confirmation */}\r\n      <AlertDialog open={!!deleteId} onOpenChange={(open) => { if (!open) setDeleteId(null); }}>\r\n        <AlertDialogContent>\r\n          <AlertDialogHeader>\r\n            <AlertDialogTitle>Hapus Data Tanah?</AlertDialogTitle>\r\n            <AlertDialogDescription>\r\n              Tindakan ini tidak dapat dibatalkan. Data tanah akan dihapus secara permanen.\r\n            </AlertDialogDescription>\r\n          </AlertDialogHeader>\r\n          <AlertDialogFooter>\r\n            <AlertDialogCancel>Batal</AlertDialogCancel>\r\n            <AlertDialogAction \r\n              onClick={() => deleteMutation.mutate(deleteId)}\r\n              className=\"bg-red-600 hover:bg-red-700\"\r\n            >\r\n              Hapus\r\n            </AlertDialogAction>\r\n          </AlertDialogFooter>\r\n        </AlertDialogContent>\r\n      </AlertDialog>\r\n\r\n      {/* QR Code Modal */}\r\n      <Dialog open={!!qrTanah} onOpenChange={() => setQrTanah(null)}>\r\n        <DialogContent className=\"sm:max-w-md\">\r\n          <DialogHeader>\r\n            <DialogTitle className=\"text-center\">QR Code Lokasi Tanah</DialogTitle>\r\n          </DialogHeader>\r\n          <div className=\"flex flex-col items-center space-y-4 p-4\">\r\n            <div className=\"text-center space-y-1\">\r\n              <p className=\"font-medium text-slate-800\">\r\n                {qrTanah?.nama_pemilik}\r\n                {qrTanah?.nama_penerima && (\r\n                  <> diserahkan kepada {qrTanah?.nama_penerima}</>\r\n                )}\r\n                {qrTanah?.atas_nama && (\r\n                  <> / {qrTanah?.atas_nama}</>\r\n                )}\r\n              </p>\r\n              <p className=\"text-sm text-slate-500\">{(qrTanah?.luas_meter || 0) % 1 === 0 ? Math.floor(qrTanah?.luas_meter || 0) : (qrTanah?.luas_meter || 0).toString().replace('.', ',')} m²</p>\r\n              <p className=\"text-xs text-slate-400\">\r\n                {qrTanah?.latitude}, {qrTanah?.longitude}\r\n              </p>\r\n            </div>\r\n            <div className=\"bg-white p-4 rounded-lg border-2 border-slate-200\">\r\n              <img \r\n                src={`https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(`https://www.google.com/maps?q=${qrTanah?.latitude},${qrTanah?.longitude}`)}`}\r\n                alt=\"QR Code\"\r\n                className=\"w-64 h-64\"\r\n              />\r\n            </div>\r\n            <p className=\"text-xs text-center text-slate-500\">\r\n              Scan QR code untuk melihat lokasi di Google Maps\r\n            </p>\r\n            <Button \r\n              onClick={() => {\r\n                const googleMapsUrl = `https://www.google.com/maps?q=${qrTanah?.latitude},${qrTanah?.longitude}`;\r\n                window.open(googleMapsUrl, '_blank');\r\n              }}\r\n              className=\"w-full bg-green-600 hover:bg-green-700\"\r\n            >\r\n              <MapPin className=\"w-4 h-4 mr-2\" />\r\n              Buka di Google Maps\r\n            </Button>\r\n          </div>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}"],"names":["DataTanah","page","setPage","useState","pageSize","user","setUser","searchTerm","setSearchTerm","filterStatus","setFilterStatus","deleteId","setDeleteId","qrTanah","setQrTanah","navigate","useNavigate","useEffect","tanahList","isLoading","tanahError","useQuery","query","supabase","data","error","filteredTanah","tanah","matchSearch","matchStatus","totalPages","paginatedTanah","queryClient","useQueryClient","authUser","userApp","deleteMutation","useMutation","id","toast","jsxs","jsx","FileText","Button","Plus","Card","CardContent","Search","Input","e","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","AnimatePresence","index","motion","User","Badge","MapPin","Link","createPageUrl","Eye","Map","Pencil","valueStr","Printer","QrCode","Trash2","AlertDialog","open","AlertDialogContent","AlertDialogHeader","AlertDialogTitle","AlertDialogDescription","AlertDialogFooter","AlertDialogCancel","AlertDialogAction","Dialog","DialogContent","DialogHeader","DialogTitle","Fragment","googleMapsUrl"],"mappings":"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"}