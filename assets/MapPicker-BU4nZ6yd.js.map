{"version":3,"file":"MapPicker-BU4nZ6yd.js","sources":["../../Components/maps/MapPicker.jsx"],"sourcesContent":["import React, { useState, Suspense, useRef, useEffect } from \"react\";\r\nimport {\r\n  MapContainer,\r\n  TileLayer,\r\n  Marker,\r\n  Popup,\r\n  Polygon,\r\n  Polyline,\r\n  Tooltip,\r\n  FeatureGroup,\r\n} from \"react-leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport \"leaflet-draw/dist/leaflet.draw.css\";\r\nimport { EditControl } from \"react-leaflet-draw\";\r\nimport \"leaflet-draw\";\r\nimport { useTanahList, useCurrentUser } from \"@/lib/utilsUser\";\r\nimport { getColors } from \"./utils\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Badge } from \"@/components/ui/badge\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { createPageUrl } from \"@/utils\";\r\nimport { Eye, EyeOff } from \"lucide-react\";\r\n\r\nimport L from \"leaflet\";\r\nimport markerIcon2x from \"leaflet/dist/images/marker-icon-2x.png\";\r\nimport markerIcon from \"leaflet/dist/images/marker-icon.png\";\r\nimport markerShadow from \"leaflet/dist/images/marker-shadow.png\";\r\n\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n  iconRetinaUrl: markerIcon2x,\r\n  iconUrl: markerIcon,\r\n  shadowUrl: markerShadow,\r\n});\r\n\r\n\r\nfunction MapPicker({\r\n  center,\r\n  zoom = 15,\r\n  isPicker = false,\r\n  selected,\r\n  onMapClick,\r\n  mapType = \"hybrid\",\r\n  mapCenter,\r\n  mapZoom\r\n}) {\r\n  // Untuk debug: data terakhir yang dikirim ke onChange\r\n  const [lastOnChange, setLastOnChange] = useState(null);\r\n  // Semua hook harus di atas sebelum return apapun\r\n  const mapRef = useRef();\r\n  const featureGroupRef = useRef();\r\n\r\n  // Update center/zoom jika props berubah\r\n  useEffect(() => {\r\n    if (mapRef.current && mapCenter && Array.isArray(mapCenter)) {\r\n      mapRef.current.setView(mapCenter, mapZoom || zoom);\r\n    }\r\n  }, [mapCenter, mapZoom]);\r\n  const user = useCurrentUser();\r\n  const { data: tanahList = [], isLoading } = useTanahList(user);\r\n  const showTooltips = true;\r\n  const [showMarkersState, setShowMarkersState] = useState(true);\r\n  const [showPolygonsState, setShowPolygonsState] = useState(true);\r\n  const [showPolylinesState, setShowPolylinesState] = useState(true);\r\n  const [showTooltipState, setShowTooltipState] = useState(showTooltips);\r\n  const tanahfiltered = tanahList;\r\n  const defaultCenter = [-0.78961418, 119.89162106];\r\n  const googleUrl = `https://mt1.google.com/vt/lyrs=${mapType === \"hybrid\" ? \"y,h\" : \"y\"}&x={x}&y={y}&z={z}`;\r\n  const attribution = mapType === \"hybrid\" ? \"Map data ©2025 Google\" : \"&copy; OpenStreetMap contributors\";\r\n\r\n  const [lastDraw, setLastDraw] = useState(null);\r\n  const handleCreated = (e) => {\r\n    // console.log('handleCreated called', e);\r\n    window._lastDrawEvent = e;\r\n    if (!onMapClick) {\r\n      console.warn('onMapClick prop tidak ada!');\r\n      return;\r\n    }\r\n    if (e.layerType === 'marker') {\r\n      const { lat, lng } = e.layer.getLatLng();\r\n      const markerData = {\r\n        latitude: lat.toString(),\r\n        longitude: lng.toString(),\r\n        polygon_coords: null,\r\n        type: 'marker',\r\n      };\r\n      setLastDraw({ label: 'Marker', data: markerData });\r\n      setLastOnChange(markerData);\r\n      onMapClick(markerData);\r\n    } else if (e.layerType === 'polygon' || e.layerType === 'polyline') {\r\n      let coords = e.layer.getLatLngs();\r\n      if (Array.isArray(coords) && Array.isArray(coords[0])) {\r\n        coords = coords[0];\r\n      }\r\n      const arr = coords.map(c => [Number(c.lat), Number(c.lng)]);\r\n      let lat = null, lng = null;\r\n      if (arr.length > 0) {\r\n        const sum = arr.reduce((acc, [plat, plng]) => [acc[0] + plat, acc[1] + plng], [0, 0]);\r\n        lat = sum[0] / arr.length;\r\n        lng = sum[1] / arr.length;\r\n      }\r\n      const polyData = {\r\n        latitude: lat !== null ? lat.toString() : '',\r\n        longitude: lng !== null ? lng.toString() : '',\r\n        polygon_coords: arr,\r\n        type: e.layerType,\r\n      };\r\n      setLastDraw({ label: e.layerType === 'polygon' ? 'Polygon' : 'Polyline', data: polyData });\r\n      setLastOnChange(polyData);\r\n      onMapClick(polyData);\r\n    } else {\r\n      console.warn('handleCreated: layerType tidak dikenali', e.layerType, e);\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div\r\n        style={{\r\n          width: \"100%\",\r\n          height: 400,\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n        }}\r\n      >\r\n        Memuat data tanah...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n       <div\r\n        style={{\r\n          width: \"100%\",\r\n          height: 600,\r\n          border: \"2px solid #e2e8f0\",\r\n          borderRadius: 8,\r\n        }}\r\n      >\r\n      <div className=\"absolute z-[1000] top-10 right-16 flex flex-row gap-2 bg-white bg-opacity-80 p-1 rounded shadow-lg\" style={{marginRight: '35px', marginTop: '8px'}}>\r\n        <Button\r\n          className=\"border-2 border-white\"\r\n          size=\"sm\"\r\n          variant={showTooltipState ? 'default' : 'outline'}\r\n          onClick={() => setShowTooltipState(v => !v)}\r\n        >\r\n          {showTooltipState ? <><Eye className=\"w-4 h-4 mr-1\" /> Info</> : <><EyeOff className=\"w-4 h-4 mr-1\" /> Info</>}\r\n        </Button>\r\n        <Button\r\n          className=\"border-2 border-white\"\r\n          size=\"sm\"\r\n          variant={showMarkersState ? 'default' : 'outline'}\r\n          onClick={() => setShowMarkersState(v => !v)}\r\n        >\r\n          {showMarkersState ? <><Eye className=\"w-4 h-4 mr-1\" /> Marker</> : <><EyeOff className=\"w-4 h-4 mr-1\" /> Marker</>}\r\n        </Button>\r\n      </div>\r\n      <MapContainer\r\n        center={mapCenter || center || defaultCenter}\r\n        zoom={mapZoom || zoom}\r\n        maxZoom={20}\r\n        style={{ width: \"100%\", height: \"100%\", borderRadius: 8 }}\r\n        ref={mapRef}\r\n      >\r\n        <TileLayer url={googleUrl} attribution={attribution} maxZoom={20} />\r\n        <FeatureGroup ref={featureGroupRef}>\r\n          <EditControl\r\n            position=\"topleft\"\r\n            onCreated={handleCreated}\r\n            featureGroup={featureGroupRef.current}\r\n            draw={{\r\n              marker: true,\r\n              polyline: true,\r\n              polygon: true,\r\n              circle: false,\r\n              rectangle: false,\r\n              circlemarker: false,\r\n            }}\r\n          />\r\n        </FeatureGroup>\r\n        {/* Jika mode picker, tampilkan marker pada lokasi yang dipilih */}\r\n        {isPicker && selected && selected.latitude && selected.longitude && (\r\n          <Marker position={[selected.latitude, selected.longitude]}>\r\n            <Popup>Lokasi dipilih: {selected.latitude}, {selected.longitude}</Popup>\r\n          </Marker>\r\n        )}\r\n        {tanahfiltered.map((tanah, idx) => {\r\n          const urlParams = new URLSearchParams(window.location.search);\r\n          const tanahId = urlParams.get('id');\r\n          const isSelected =  parseInt(tanah.id) === parseInt(tanahId);\r\n      // Marker\r\n      const marker =\r\n        tanah.latitude && tanah.longitude && showMarkersState ? (\r\n          <Marker\r\n            key={`marker-${idx}`}\r\n            position={[tanah.latitude, tanah.longitude]}\r\n          >\r\n            <Popup>\r\n            <TanahPopupContent tanah={tanah} />\r\n            </Popup>\r\n            {showTooltipState && (\r\n              <Tooltip\r\n                direction=\"top\"\r\n                offset={[0, -10]}\r\n                permanent>\r\n                <span\r\n                  style={{\r\n                    background: isSelected ? '#f97316' : '#fff', // orange untuk terpilih, putih untuk lain\r\n                    color: isSelected ? '#fff' : '#000',\r\n                    fontWeight: 'bold',\r\n                    borderRadius: 6,\r\n                    border: '2px solid #fff',\r\n                    boxShadow: '0 2px 8px #0002',\r\n                    padding: '2px 8px',\r\n                    display: 'inline-block',\r\n                  }}\r\n                >\r\n                  {tanah.nama_pemilik}\r\n                </span>\r\n              </Tooltip>\r\n            )}\r\n          </Marker>\r\n        ) : null;\r\n\r\n      // Polygon\r\n      let polygonCoords = tanah.polygon_coords;\r\n      if (polygonCoords && typeof polygonCoords === \"string\") {\r\n        try {\r\n          polygonCoords = JSON.parse(polygonCoords);\r\n        } catch {\r\n          polygonCoords = null;\r\n        }\r\n      }\r\n      const { color, borderColor } = getColors(\r\n        tanah.status,\r\n      );\r\n      const polygon =\r\n        polygonCoords &&\r\n          Array.isArray(polygonCoords) &&\r\n          polygonCoords.length > 2 ? (\r\n          <Polygon\r\n            key={`polygon-${idx}`}\r\n            positions={polygonCoords}\r\n            pathOptions={{\r\n              color: borderColor,\r\n              fillColor: color,\r\n            }}\r\n          >\r\n            <Popup>\r\n              <div>\r\n                <b>Koordinat Polygon:</b>\r\n                <pre style={{ fontSize: 12, margin: 0 }}>\r\n                  {JSON.stringify(polygonCoords, null, 2)}\r\n                </pre>\r\n              </div>\r\n            </Popup>\r\n          </Polygon>\r\n        ) : null;\r\n\r\n      // Polyline\r\n      let polylineCoords = tanah.polyline_coords;\r\n      if (polylineCoords && typeof polylineCoords === \"string\") {\r\n        try {\r\n          polylineCoords = JSON.parse(polylineCoords);\r\n        } catch {\r\n          polylineCoords = null;\r\n        }\r\n      }\r\n      const polyline =\r\n        polylineCoords &&\r\n          Array.isArray(polylineCoords) &&\r\n          polylineCoords.length > 1 ? (\r\n          <Polyline\r\n            key={`polyline-${idx}`}\r\n            positions={polygonCoords}\r\n            color={color.borderColor}\r\n            fillColor={color.color}\r\n            fillOpacity={0.5}\r\n          >\r\n            <Popup>\r\n              <div>\r\n                <b>Koordinat Polyline:</b>\r\n                <pre style={{ fontSize: 12, margin: 0 }}>\r\n                  {JSON.stringify(polylineCoords, null, 2)}\r\n                </pre>\r\n              </div>\r\n            </Popup>\r\n          </Polyline>\r\n        ) : null;\r\n\r\n      return (\r\n        <React.Fragment key={idx}>\r\n          {marker}\r\n          {polygon}\r\n          {polyline}\r\n        </React.Fragment>\r\n      );\r\n    })}\r\n    \r\n        {/* Tabel koordinat temp mappicker kanan bawah */}\r\n        <div style={{\r\n          position: 'absolute',\r\n          right: 24,\r\n          bottom: 24,\r\n          zIndex: 9999,\r\n          background: 'rgba(255,255,255,0.10)',\r\n          borderRadius: 12,\r\n          boxShadow: '0 2px 12px #0002',\r\n          padding: 16,\r\n          minWidth: 260,\r\n          maxWidth: 340,\r\n          backdropFilter: 'blur(2px)',\r\n        }}>\r\n          <div style={{fontWeight: 'bold', color: '#0c4a6e', marginBottom: 8, fontSize: 15}}>\r\n            Koordinat Pusat: {lastDraw?.data?.latitude || '-'}, {lastDraw?.data?.longitude || '-'}\r\n          </div>\r\n          <table style={{width: '100%', background: 'transparent', borderCollapse: 'collapse'}}>\r\n            <thead>\r\n              <tr style={{background: 'rgba(255,255,255,0.25)'}}>\r\n                <th style={{borderBottom: '1px solid #ddd', padding: '4px 8px', textAlign: 'center'}}>No</th>\r\n                <th style={{borderBottom: '1px solid #ddd', padding: '4px 8px', textAlign: 'center'}}>Lat</th>\r\n                <th style={{borderBottom: '1px solid #ddd', padding: '4px 8px', textAlign: 'center'}}>Long</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {(Array.isArray(lastDraw?.data?.polygon_coords) ? lastDraw.data.polygon_coords : (lastDraw?.data?.latitude && lastDraw?.data?.longitude ? [[Number(lastDraw.data.latitude), Number(lastDraw.data.longitude)]] : [])).map(([lat, lng], idx) => (\r\n                <tr key={idx} style={{background: idx % 2 === 0 ? 'rgba(255,255,255,0.15)' : 'transparent'}}>\r\n                  <td style={{padding: '4px 8px', textAlign: 'center'}}>{idx + 1}</td>\r\n                  <td style={{padding: '4px 8px', textAlign: 'center'}}>{lat}</td>\r\n                  <td style={{padding: '4px 8px', textAlign: 'center'}}>{lng}</td>\r\n                </tr>\r\n              ))}\r\n              {(Array.isArray(lastDraw?.data?.polygon_coords) ? lastDraw.data.polygon_coords : (lastDraw?.data?.latitude && lastDraw?.data?.longitude ? [[Number(lastDraw.data.latitude), Number(lastDraw.data.longitude)]] : [])).length === 0 && (\r\n                <tr><td colSpan={3} style={{textAlign: 'center', color: '#64748b', padding: 8}}>Belum ada koordinat</td></tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </MapContainer>\r\n      </div>\r\n           \r\n    </>\r\n  );\r\n}\r\n\r\nfunction TanahPopupContent({ tanah }) {\r\n  const displayLuas = tanah.luas_meter % 1 === 0\r\n    ? Math.floor(tanah.luas_meter)\r\n    : tanah.luas_meter.toString().replace('.', ',');\r\n\r\n  return (\r\n    <Suspense fallback={<div>Memuat detail...</div>}>\r\n      <div className=\"min-w-[220px] max-w-[260px] bg-white rounded-xl shadow-lg p-4 text-center space-y-3 border border-gray-200\">\r\n        <p className=\"font-bold text-slate-800 text-base mb-1\">\r\n          {tanah.nama_pemilik}\r\n          {tanah.nama_penerima && <span className=\"block text-xs font-normal text-slate-500\">Penerima: {tanah.nama_penerima}</span>}\r\n        </p>\r\n        <div className=\"bg-blue-50 py-1 rounded border border-blue-100 font-semibold text-blue-700 text-sm\">\r\n          {displayLuas} m²\r\n        </div>\r\n        <div className=\"flex justify-center py-1\">\r\n          <img\r\n            src={`https://api.qrserver.com/v1/create-qr-code/?size=120x120&data=${encodeURIComponent(`https://www.google.com/maps?q=${tanah.latitude},${tanah.longitude}`)}`}\r\n            alt=\"QR\"\r\n            className=\"w-16 h-16 border rounded shadow\"\r\n          />\r\n        </div>\r\n        <Badge variant={tanah.status === 'Selesai' ? 'default' : tanah.status === 'Ditolak' ? 'destructive' : 'secondary'}>\r\n          {tanah.status || 'Proses'}\r\n        </Badge>\r\n        <Link to={`${createPageUrl('DetailTanah')}?id=${tanah.id}`} className=\"block mt-2\">\r\n          <Button size=\"sm\" className=\"w-full bg-blue-600 hover:bg-blue-700\">\r\n            <Eye className=\"w-4 h-4 mr-2\" /> Detail\r\n          </Button>\r\n        </Link>\r\n      </div>\r\n    </Suspense>\r\n  );\r\n}\r\n\r\nexport default MapPicker;\r\n"],"names":["MapPicker","center","zoom","isPicker","selected","onMapClick","mapType","mapCenter","mapZoom","lastOnChange","setLastOnChange","useState","mapRef","useRef","featureGroupRef","useEffect","current","Array","isArray","setView","user","useCurrentUser","data","tanahList","isLoading","useTanahList","showMarkersState","setShowMarkersState","showPolygonsState","setShowPolygonsState","showPolylinesState","setShowPolylinesState","showTooltipState","setShowTooltipState","tanahfiltered","googleUrl","attribution","lastDraw","setLastDraw","jsx","style","width","height","display","alignItems","justifyContent","children","Fragment","jsxs","border","borderRadius","className","marginRight","marginTop","Button","size","variant","onClick","v","Eye","EyeOff","MapContainer","maxZoom","ref","TileLayer","url","FeatureGroup","EditControl","position","onCreated","e","window","_lastDrawEvent","layerType","lat","lng","layer","getLatLng","markerData","latitude","toString","longitude","polygon_coords","type","label","coords","getLatLngs","arr","map","c","Number","length","sum","reduce","acc","plat","plng","polyData","console","warn","featureGroup","draw","marker","polyline","polygon","circle","rectangle","circlemarker","Marker","Popup","tanah","idx","tanahId","URLSearchParams","location","search","get","isSelected","parseInt","id","TanahPopupContent","Tooltip","direction","offset","permanent","background","color","fontWeight","boxShadow","padding","nama_pemilik","polygonCoords","JSON","parse","borderColor","getColors","status","Polygon","positions","pathOptions","fillColor","fontSize","margin","stringify","polylineCoords","polyline_coords","Polyline","fillOpacity","React","right","bottom","zIndex","minWidth","maxWidth","backdropFilter","marginBottom","borderCollapse","borderBottom","textAlign","colSpan","displayLuas","luas_meter","Math","floor","replace","Suspense","fallback","nama_penerima","src","encodeURIComponent","alt","Badge","Link","to","createPageUrl","L","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","markerIcon2x","iconUrl","markerIcon","shadowUrl","markerShadow"],"mappings":"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"}