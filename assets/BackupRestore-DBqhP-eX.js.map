{"version":3,"file":"BackupRestore-DBqhP-eX.js","sources":["../../Pages/BackupRestore.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { toast } from \"sonner\";\r\n\r\nexport default function BackupRestore() {\r\n  const [backupFilename, setBackupFilename] = useState(\"\");\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n\r\n  React.useEffect(() => {\r\n    // Cek user dari localStorage, hanya admin yang boleh akses\r\n    const userStr = localStorage.getItem(\"user\");\r\n    if (userStr) {\r\n      try {\r\n        const user = JSON.parse(userStr);\r\n        setIsAdmin(user.role === \"admin\");\r\n      } catch {\r\n        setIsAdmin(false);\r\n      }\r\n    } else {\r\n      setIsAdmin(false);\r\n    }\r\n  }, []);\r\n\r\n  if (!isAdmin) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center text-red-600 font-bold text-xl\">\r\n          Akses hanya untuk admin\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-xl mx-auto py-10 space-y-8\">\r\n      <h1 className=\"text-3xl font-bold mb-4\">Backup & Restore Database</h1>\r\n         <div className=\"flex gap-2 items-center mb-4\">\r\n           <Button\r\n             type=\"button\"\r\n             variant=\"outline\"\r\n             className=\"border-green-600 text-green-600 hover:bg-green-50\"\r\n             onClick={() => {\r\n               window.open(`/api/backup-db-pg.php`, '_blank');\r\n             }}\r\n           >\r\n             Backup SQL (Postgres)\r\n           </Button>\r\n         </div>\r\n      <form\r\n        onSubmit={async (e) => {\r\n          e.preventDefault();\r\n          const fileInput = e.target.elements.restorefile;\r\n          if (!fileInput.files[0]) return;\r\n          const formData = new FormData();\r\n          formData.append('sqlfile', fileInput.files[0]);\r\n          const res = await fetch('/api/restore-db-pg.php', { method: 'POST', body: formData });\r\n          if (res.ok) {\r\n            toast.success('Restore sukses!');\r\n          } else {\r\n            toast.error('Restore gagal!');\r\n          }\r\n        }}\r\n        className=\"flex gap-2 items-center\"\r\n      >\r\n        <input\r\n          type=\"file\"\r\n          name=\"restorefile\"\r\n          accept=\".sql\"\r\n          className=\"border px-2 py-1 rounded text-sm\"\r\n          style={{ minWidth: 180 }}\r\n        />\r\n        <Button type=\"submit\" variant=\"outline\" className=\"border-red-600 text-red-600 hover:bg-red-50\">\r\n          Restore SQL (Postgres)\r\n        </Button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["BackupRestore","backupFilename","setBackupFilename","useState","isAdmin","setIsAdmin","React","userStr","user","jsxs","jsx","Button","e","fileInput","formData","toast"],"mappings":"8JAIA,SAAwBA,GAAgB,CACtC,KAAM,CAACC,EAAgBC,CAAiB,EAAIC,EAAAA,SAAS,EAAE,EACjD,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAK,EAiB5C,OAfAG,EAAM,UAAU,IAAM,CAEpB,MAAMC,EAAU,aAAa,QAAQ,MAAM,EAC3C,GAAIA,EACF,GAAI,CACF,MAAMC,EAAO,KAAK,MAAMD,CAAO,EAC/BF,EAAWG,EAAK,OAAS,OAAO,CAClC,MAAQ,CACNH,EAAW,EAAK,CAClB,MAEAA,EAAW,EAAK,CAEpB,EAAG,CAAA,CAAE,EAEAD,EAWHK,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,0BAA0B,SAAA,4BAAyB,EAC9DA,EAAAA,IAAC,MAAA,CAAI,UAAU,+BACb,SAAAA,EAAAA,IAACC,EAAA,CACC,KAAK,SACL,QAAQ,UACR,UAAU,oDACV,QAAS,IAAM,CACb,OAAO,KAAK,wBAAyB,QAAQ,CAC/C,EACD,SAAA,uBAAA,CAAA,EAGH,EACHF,EAAAA,KAAC,OAAA,CACC,SAAU,MAAOG,GAAM,CACrBA,EAAE,eAAA,EACF,MAAMC,EAAYD,EAAE,OAAO,SAAS,YACpC,GAAI,CAACC,EAAU,MAAM,CAAC,EAAG,OACzB,MAAMC,EAAW,IAAI,SACrBA,EAAS,OAAO,UAAWD,EAAU,MAAM,CAAC,CAAC,GACjC,MAAM,MAAM,yBAA0B,CAAE,OAAQ,OAAQ,KAAMC,EAAU,GAC5E,GACNC,EAAM,QAAQ,iBAAiB,EAE/BA,EAAM,MAAM,gBAAgB,CAEhC,EACA,UAAU,0BAEV,SAAA,CAAAL,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,KAAK,cACL,OAAO,OACP,UAAU,mCACV,MAAO,CAAE,SAAU,GAAA,CAAI,CAAA,EAEzBA,EAAAA,IAACC,GAAO,KAAK,SAAS,QAAQ,UAAU,UAAU,8CAA8C,SAAA,wBAAA,CAEhG,CAAA,CAAA,CAAA,CACF,EACF,EAlDED,EAAAA,IAAC,OAAI,UAAU,gDACb,eAAC,MAAA,CAAI,UAAU,6CAA6C,SAAA,yBAAA,CAE5D,CAAA,CACF,CAgDN"}