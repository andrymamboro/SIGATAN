import{s as i}from"./db-DOO1oGDP.js";async function r(){const{data:{user:a}}=await i.auth.getUser();if(!a)return null;let e=null,{data:s}=await i.from("users").select("*").eq("auth_id",a.id).single();if(e=s,!e){let{data:t}=await i.from("users").select("*").eq("uid",a.id).single();e=t,e&&!e.auth_id&&await i.from("users").update({auth_id:a.id}).eq("id",e.id)}if(!e&&a.email){let{data:t}=await i.from("users").select("*").eq("email",a.email).single();e=t,e&&await i.from("users").update({uid:a.id,auth_id:a.id}).eq("id",e.id)}return e?{...a,...e}:null}export{r as g};
//# sourceMappingURL=authUser-D2jCY9ud.js.map
