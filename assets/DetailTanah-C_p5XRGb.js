import{s as e,j as a,L as s,W as l,I as t,X as r,O as n,F as i,R as o,Y as d,Z as m,$ as c,a0 as x,a1 as u,w as b,a2 as h,a3 as j,a4 as g,a5 as p,a6 as f,a7 as v,J as w,a8 as N,a9 as k,aa as _,ab as y,ac as T,ad as D}from"./vendor-B-UrjPD3.js";import{s as P}from"./db-BLqj6fe8.js";import{Card as L,CardHeader as $,CardTitle as S,CardContent as K,CardFooter as B}from"./card-iZaV0svU.js";import{c as F,B as M}from"./index-DFbN_dxx.js";import{B as I}from"./badge-B7sJnBCz.js";import{T as q,a as C,b as R,c as U}from"./tabs-CwzjWjQS.js";import"./pdf-Dy1nE1k0.js";function A(){const A=new URLSearchParams(window.location.search).get("id"),{data:z,isLoading:J}=e({queryKey:["tanah-detail",A],queryFn:async()=>{if(!A)return null;const{data:e,error:a}=await P.from("tanah").select("*").eq("id",A).single();if(a)throw new Error(a.message);if(e&&e.polygon_coords&&"string"==typeof e.polygon_coords)try{e.polygon_coords=JSON.parse(e.polygon_coords)}catch(s){console.error("Failed to parse polygon_coords:",s),e.polygon_coords=null}return e},enabled:!!A}),E=(e,a=!1)=>{if(!e)return"-";try{const s=new Date(e);if(isNaN(s.getTime()))return"-";if(a){const e=String(s.getDate()).padStart(2,"0"),a=String(s.getMonth()+1).padStart(2,"0");return`${e}/${a}/${String(s.getFullYear()).slice(-2)}`}return T(s,"dd MMMM yyyy",{locale:D})}catch(s){return"-"}},H=z?.latitude&&z?.longitude?`https://www.google.com/maps?q=${z.latitude},${z.longitude}`:"";if(J)return a.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!z)return a.jsxs("div",{className:"text-center py-12",children:[a.jsx("h2",{className:"text-xl font-semibold text-white",children:"Data tidak ditemukan"}),a.jsx(s,{to:F("DataTanah"),children:a.jsx(M,{className:"mt-4",children:"Kembali ke Data Tanah"})})]});const O=({label:e,value:s,icon:l,className:t})=>a.jsxs("div",{className:`p-2 flex items-center py-2 border border-b-4 border-slate-300 rounded-md bg-white mb-2 shadow-sm ${t||""}`,children:[l&&a.jsx(l,{className:"w-4 h-4 text-blue-500 mr-2"}),a.jsx("span",{className:"w-1/3 text-slate-800 text-sm flex items-center font-semibold",children:e}),a.jsx("span",{className:"w-2/3 text-slate-800 font-medium",children:s||"-"})]}),Q=({label:e,value:s,icon:l})=>{let t="bg-blue-100 text-blue-800";return"Selesai"===s?t="bg-emerald-100 text-emerald-800":"Ditolak"===s&&(t="bg-red-100 text-red-800"),a.jsxs("div",{className:`p-2 flex items-center py-2 border border-b-4 border-slate-300 rounded-md mb-2 shadow-sm ${t}`,children:[l&&a.jsx(l,{className:"w-4 h-4 mr-2"}),a.jsx("span",{className:"w-1/3 text-sm flex items-center font-semibold",children:e}),a.jsx("span",{className:"w-2/3 font-medium",children:s||"-"})]})},W=({label:e,value:s,icon:l})=>a.jsxs("div",{className:"flex items-start text-align-start",children:[l&&a.jsx(l,{className:"w-4 h-4 text-emerald-500 mr-2"}),a.jsx("span",{className:"w-1/3 text-slate-500 text-xs ",children:e}),a.jsx("span",{className:"w-2/3 text-slate-500 text-xs truncate whitespace-nowrap overflow-hidden min-w-[180px]",children:s||"-"})]});return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(s,{to:F("DataTanah"),children:a.jsx(M,{variant:"outline",size:"icon",children:a.jsx(l,{className:"w-4 h-4 text-white"})})}),a.jsx("div",{children:a.jsx("h1",{className:"text-2xl font-bold text-white",children:"Detail Data Tanah"})})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(I,{className:`px-4 py-2 text-sm font-semibold rounded-lg shadow-sm border-1 border-white transition-all duration-200\n              ${"Selesai"===z.status?"bg-yellow-500 text-yellow-900 border-yellow":"Ditolak"===z.status?"bg-red-100 text-red-700 border-red-200":"Proses"===z.status?"bg-blue-100 text-blue-700 border-blue-200":"bg-slate-100 text-slate-500 border-slate-200"}\n            `,children:z.status||"Proses"}),a.jsx(s,{to:F("Laporan")+`?id=${z.id}`,children:a.jsxs(M,{className:"bg-blue-600 hover:bg-blue-700 border-2 border-white",variant:"outline",children:[a.jsx(t,{className:"w-4 h-4 mr-2"}),"Cetak Surat"]})}),a.jsx(s,{to:F("FormTanah")+`?id=${z.id}`,children:a.jsxs(M,{className:"bg-orange-500 hover:bg-orange-600 border-2 border-white",variant:"outline",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536M9 13l6.586-6.586a2 2 0 112.828 2.828L11.828 15.828a4 4 0 01-1.414.828l-4 1a1 1 0 01-1.263-1.263l1-4a4 4 0 01.828-1.414z"})}),"Edit"]})})]})]}),a.jsxs(q,{defaultValue:"pemilik",className:"w-full mb-4",children:[a.jsx(C,{className:"w-full flex flex-col items-center mb-6 bg-transparent p-0 border-none shadow-none",children:a.jsx("div",{className:"flex w-full max-w-2xl justify-between items-center gap-2",children:[{label:"Pemilik",value:"pemilik",icon:r},{label:"Tanah",value:"tanah",icon:n},{label:"Dokumen",value:"dokumen",icon:i}].map((e,s,l)=>a.jsxs(o.Fragment,{children:[a.jsxs(R,{value:e.value,className:"flex flex-col items-center flex-1 focus:outline-none group bg-transparent border-none shadow-none p-0  transition-all",children:[a.jsx("div",{className:"rounded-full w-8 h-8 flex items-center justify-center font-bold border-2 transition-all duration-200 mb-1\n                    bg-gradient-to-b from-slate-900 via-slate-800 to-blue-900 text-white border-white scale-110 shadow-lg",children:s+1}),a.jsxs("span",{className:"text-xs font-medium flex items-center gap-1 text-white",children:[e.icon&&a.jsx(e.icon,{className:"w-4 h-4"})," ",e.label]})]}),s<l.length-1&&a.jsx("div",{className:"flex-1 h-1 mx-1 rounded bg-gradient-to-r from-slate-900 via-slate-800 to-blue-900"})]},e.value))})}),a.jsx(U,{value:"pemilik",children:a.jsxs(L,{className:"border-0 shadow-md",children:[a.jsx($,{className:"bg-gradient-to-b from-slate-900 via-slate-800 to-blue-900 text-white rounded-t-lg",children:a.jsxs(S,{className:"flex items-center gap-2",children:[a.jsx(r,{className:"w-5 h-5"}),"Data Pemilik & Tanah"]})}),a.jsxs(K,{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-lg font-semibold bg-gradient-to-b from-slate-900 via-slate-800 to-blue-900 text-white rounded-md p-2 mb-4",children:"Pemilik"}),a.jsx(O,{label:"Nama Lengkap",value:z.nama_pemilik,icon:r}),a.jsx(O,{label:"NIK",value:z.nik_pemilik,icon:d}),a.jsx(O,{label:"Umur",value:z.umur_pemilik?`${z.umur_pemilik} Tahun`:"-",icon:m}),a.jsx(O,{label:"Pekerjaan",value:z.pekerjaan_pemilik,icon:c}),a.jsx(O,{label:"Alamat",value:z.alamat_pemilik,icon:x})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-lg font-semibold bg-gradient-to-b from-slate-900 via-slate-800 to-blue-900 text-white rounded-md p-2 mb-4",children:"Penerima"}),a.jsx(O,{label:"Nama Penerima",value:z.nama_penerima,icon:r}),a.jsx(O,{label:"Atas Nama",value:z.atas_nama?`${z.atas_nama}`:"-",icon:u}),a.jsx(O,{label:"NIK",value:z.nik_penerima,icon:d}),a.jsx(O,{label:"Umur",value:z.umur_penerima?`${z.umur_penerima} Tahun`:"-",icon:m}),a.jsx(O,{label:"Pekerjaan",value:z.pekerjaan_penerima,icon:c}),a.jsx(O,{label:"Alamat",value:z.alamat_penerima,icon:x})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-lg font-semibold bg-gradient-to-b from-slate-900 via-slate-800 to-blue-900 text-white rounded-md p-2 mb-4",children:"Data Tanah"}),a.jsx(O,{label:"Lokasi",value:z.lokasi,icon:n}),a.jsx(O,{label:"Kecamatan",value:z.kecamatan,icon:n}),a.jsx(O,{label:"Kelurahan",value:z.kelurahan,icon:n}),a.jsx(O,{label:"Luas (P x L)",value:z.luas_perkalian,icon:b}),a.jsx(O,{label:"Luas (m²)",value:z.luas_meter?`${z.luas_meter} m²`:"-",icon:b}),a.jsx(O,{label:"Luas Terbilang",value:z.luas_terbilang,icon:i})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-lg font-semibold bg-gradient-to-b from-slate-900 via-slate-800 to-blue-900 text-white rounded-md p-2 mb-4",children:"Batas Batas"}),a.jsx(O,{label:"Batas Utara",value:z.batas_utara||"-",icon:h}),a.jsx(O,{label:"Batas Timur",value:z.batas_timur||"-",icon:j}),a.jsx(O,{label:"Batas Selatan",value:z.batas_selatan||"-",icon:g}),a.jsx(O,{label:"Batas Barat",value:z.batas_barat||"-",icon:p}),a.jsx("p",{className:"text-lg font-semibold bg-gradient-to-b from-slate-900 via-slate-800 to-blue-900 text-white rounded-md p-2 mb-4",children:"Transaksi"}),a.jsx(O,{label:"Jenis Transaksi",value:z.transaksi,icon:f}),a.jsx(O,{label:"Harga",value:z.harga?(Y=z.harga,new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(Y||0)):"-",icon:v}),a.jsx(O,{label:"Harga Terbilang",value:z.harga_terbilang,icon:i})]})]})]})}),a.jsx(U,{value:"tanah",children:a.jsxs("div",{className:"grid gap-6",children:[a.jsx(L,{className:"border-0 shadow-lg",children:a.jsx($,{className:"bg-gradient-to-r from-blue-900 to-blue-950 text-white rounded-t-lg",children:a.jsxs(S,{className:"flex items-center gap-2",children:[a.jsx(n,{className:"w-5 h-5"}),"Lokasi Pada Peta"]})})}),H&&a.jsxs(L,{className:"border-0 shadow-lg",children:[a.jsx($,{children:a.jsxs(S,{className:"flex items-center gap-2 text-slate-800",children:[a.jsx(w,{className:"w-5 h-5 text-blue-600"}),"QR Code Koordinat"]})}),a.jsxs(K,{className:"flex flex-col items-center p-6",children:[a.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(H)}`,alt:"QR Code Koordinat",className:"mb-4"}),a.jsxs("p",{className:"text-sm text-slate-500",children:["Lat: ",z.latitude,", Long: ",z.longitude]}),a.jsx("a",{href:H,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm mt-2",children:"Buka di Google Maps"})]})]})]})}),a.jsx(U,{value:"dokumen",children:a.jsxs(L,{className:"border-0 shadow-lg",children:[a.jsx($,{className:"bg-gradient-to-r from-blue-900 to-blue-950 text-white rounded-t-lg",children:a.jsxs(S,{className:"flex items-center gap-2",children:[a.jsx(i,{className:"w-5 h-5"}),"Data Dokumen"]})}),a.jsxs(K,{className:"p-6 flex flex-wrap gap-4 md:gap-8 text-bold",children:[a.jsxs("div",{className:"flex-1 min-w-[220px]",children:[a.jsx(O,{label:"Nomor SKPT",value:z.nomor_skpt,icon:N}),a.jsx(O,{label:"Tanggal SKPT",value:E(z.tanggal_skpt),icon:k}),a.jsx(O,{label:"Nomor Penyerahan",value:z.nomor_penyerahan,icon:N}),a.jsx(O,{label:"Tanggal Penyerahan",value:E(z.tanggal_penyerahan),icon:k}),a.jsx(Q,{label:"Status",value:z.status,icon:_})]}),a.jsxs("div",{className:"flex-1 min-w-[220px]",children:[a.jsx(O,{label:"Camat",value:z.nama_camat,icon:y}),a.jsx(O,{label:"Lurah",value:z.nama_lurah,icon:y}),a.jsx(O,{label:"Kasi Pemerintahan",value:z.nama_kasi_pemerintahan,icon:y}),a.jsx(O,{label:"Administrasi Kecamatan",value:z.nama_administrasi_kecamatan,icon:y})]})]}),a.jsxs(B,{className:"bg-slate-50 rounded-b-lg flex flex-row flex-nowrap gap-2 sm:gap-6 items-center overflow-x-auto scrollbar-thin scrollbar-thumb-slate-300",children:[a.jsx(W,{className:"text-xs text-slate-500 min-w-[200px]",label:"Dibuat:",value:E(z.created_date,!0)}),a.jsx(W,{className:"text-xs text-slate-500 min-w-[200px]",label:"Update:",value:E(z.updated_date,!0)}),a.jsx(W,{className:"text-xs text-slate-500 min-w-[200px]",label:"by:",value:z.created_by})]})]})})]})]});var Y}export{A as default};
//# sourceMappingURL=DetailTanah-C_p5XRGb.js.map
