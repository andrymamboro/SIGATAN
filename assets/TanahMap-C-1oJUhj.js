import{j as s,L as u,E as x,r as M}from"./vendor-BKp2tr96.js";import{L as k,g as z,c as L}from"./utils-DK2L4Iz5.js";import{C as P}from"./card-tNNNiwYM.js";import{B as g,c as y}from"./index-C5rwQ5l5.js";import{B as j}from"./badge-DBr3DEm2.js";import{M as S,T,P as $,b as f,d as q,u as D}from"./leaflet-C2x5yPDR.js";function I({center:r,zoom:o}){const l=D();return M.useEffect(()=>{r&&l.setView(r,o)},[JSON.stringify(r),o,l]),null}function A({tanahList:r,center:o,zoom:l,selectedId:d,mapType:n="hybrid",showMarkers:_=!0,showPolygons:v=!0}){const N={},m=o||[.7929194,119.8875111],a=l||20,b=r.map(e=>{if(e.polygon_coords&&typeof e.polygon_coords=="string")try{return{...e,polygon_coords:JSON.parse(e.polygon_coords)}}catch(c){return console.error("Failed to parse polygon_coords for tanah",e.id,c),{...e,polygon_coords:null}}return e});let t;return n==="street"?t={url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"© OpenStreetMap contributors"}:n==="hybrid"?t={url:"https://mt1.google.com/vt/lyrs=y,h&x={x}&y={y}&z={z}",attribution:"Map data ©2025 Google, Imagery ©2025 TerraMetrics"}:t={url:"https://mt1.google.com/vt/lyrs=y&x={x}&y={y}&z={z}",attribution:"Map data ©2025 Google, Imagery ©2025 TerraMetrics"},s.jsx(k.Provider,{value:N,children:s.jsx(P,{className:"overflow-hidden rounded-xl shadow-lg",children:s.jsx("div",{className:"relative",children:s.jsxs(S,{center:m,zoom:a,style:{height:"500px",width:"100%"},className:"z-0",children:[s.jsx(I,{center:m,zoom:a}),s.jsx(T,{url:t.url,attribution:t.attribution}),b.map(e=>{if(!e.latitude||!e.longitude)return null;const c=d&&parseInt(e.id)===parseInt(d),{color:h,borderColor:w}=z(e.status,c),C=[e.latitude,e.longitude],p=e.polygon_coords&&Array.isArray(e.polygon_coords)&&e.polygon_coords.length>2;let i=[];return v&&p&&i.push(s.jsx($,{positions:e.polygon_coords,pathOptions:{color:w,fillColor:h,fillOpacity:.3,weight:2},children:s.jsx(f,{children:s.jsxs("div",{className:"min-w-[250px] p-2",children:[s.jsxs("div",{className:"text-center space-y-2",children:[s.jsxs("p",{className:"font-medium text-slate-800",children:[e.nama_pemilik,e.nama_penerima&&s.jsxs(s.Fragment,{children:[" diserahkan kepada ",e.nama_penerima]}),e.atas_nama&&s.jsxs(s.Fragment,{children:[" / ",e.atas_nama]})]}),s.jsxs("p",{className:"text-sm text-slate-500",children:[e.luas_meter%1===0?Math.floor(e.luas_meter):e.luas_meter.toString().replace(".",",")," m²"]}),s.jsxs("p",{className:"text-xs text-slate-400",children:[e.latitude,", ",e.longitude]}),s.jsx("div",{className:"flex justify-center py-2",children:s.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(`https://www.google.com/maps?q=${e.latitude},${e.longitude}`)}`,alt:"QR Code",className:"w-32 h-32 border-2 border-slate-200 rounded"})}),s.jsx(j,{variant:e.status==="Selesai"?"default":e.status==="Ditolak"?"destructive":"secondary",children:e.status||"Proses"})]}),s.jsx(u,{to:y("DetailTanah")+`?id=${e.id}`,children:s.jsxs(g,{size:"sm",className:"w-full mt-3 bg-blue-600 hover:bg-blue-700",children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"Lihat Detail"]})})]})})},e.id)),(!p||_)&&i.push(s.jsx(q,{position:C,icon:L(e.status,a),children:s.jsx(f,{children:s.jsx("div",{className:"min-w-[250px] p-2",children:s.jsxs("div",{className:"text-center space-y-2",children:[s.jsxs("p",{className:"font-medium text-slate-800",children:[e.nama_pemilik,e.nama_penerima&&s.jsxs(s.Fragment,{children:[" diserahkan kepada ",e.nama_penerima]}),e.atas_nama&&s.jsxs(s.Fragment,{children:[" / ",e.atas_nama]})]}),s.jsxs("p",{className:"text-sm text-slate-500",children:[e.luas_meter%1===0?Math.floor(e.luas_meter):e.luas_meter.toString().replace(".",",")," m²"]}),s.jsxs("p",{className:"text-xs text-slate-400",children:[e.latitude,", ",e.longitude]}),s.jsx("div",{className:"flex justify-center py-2",children:s.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(`https://www.google.com/maps?q=${e.latitude},${e.longitude}`)}`,alt:"QR Code",className:"w-32 h-32 border-2 border-slate-200 rounded"})}),s.jsx(j,{variant:e.status==="Selesai"?"default":e.status==="Ditolak"?"destructive":"secondary",children:e.status||"Proses"}),s.jsx(u,{to:y("DetailTanah")+`?id=${e.id}`,children:s.jsxs(g,{size:"sm",className:"w-full mt-3 bg-blue-600 hover:bg-blue-700",children:[s.jsx(x,{className:"w-4 h-4 mr-2"}),"Lihat Detail"]})})]})})})},e.id+"-marker")),i.length>0?i:null})]})})})})}export{A as T};
//# sourceMappingURL=TanahMap-C-1oJUhj.js.map
