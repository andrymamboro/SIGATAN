import{r as l,l as L,j as e,J as $,aS as p,Z as o}from"./vendor-BKp2tr96.js";import{s as h}from"./db-DOO1oGDP.js";import{g as R}from"./authUser-D2jCY9ud.js";import"./leaflet-C2x5yPDR.js";const g=l.forwardRef(({className:s,children:r,...a},t)=>e.jsx("div",{ref:t,className:`rounded-lg border bg-card text-card-foreground shadow-sm ${s||""}`,...a,children:r}));g.displayName="Card";const N=l.forwardRef(({className:s,children:r,...a},t)=>e.jsx("div",{ref:t,className:`flex flex-col space-y-1.5 p-6 ${s||""}`,...a,children:r}));N.displayName="CardHeader";const j=l.forwardRef(({className:s,children:r,...a},t)=>e.jsx("h3",{ref:t,className:`text-2xl font-semibold leading-none tracking-tight ${s||""}`,...a,children:r}));j.displayName="CardTitle";const w=l.forwardRef(({className:s,children:r,...a},t)=>e.jsx("p",{ref:t,className:`text-sm text-muted-foreground ${s||""}`,...a,children:r}));w.displayName="CardDescription";const v=l.forwardRef(({className:s,children:r,...a},t)=>e.jsx("div",{ref:t,className:`p-6 pt-0 ${s||""}`,...a,children:r}));v.displayName="CardContent";const m=l.forwardRef(({className:s,...r},a)=>e.jsx("input",{ref:a,className:`flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${s||""}`,...r}));m.displayName="Input";const y=l.forwardRef(({className:s,children:r,...a},t)=>e.jsx("button",{ref:t,className:`inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 h-10 px-4 py-2 ${s||""}`,...a,children:r}));y.displayName="Button";const u=l.forwardRef(({className:s,...r},a)=>e.jsx("label",{ref:a,className:`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ${s||""}`,...r}));u.displayName="Label";function D(){const[s,r]=l.useState(""),[a,t]=l.useState(""),[d,i]=l.useState(!1),k=L(),C=async n=>{if(n.preventDefault(),!s||!a){o.error("Username dan password harus diisi");return}i(!0);try{let c=s;if(!s.includes("@")){const{data:b,error:S}=await h.from("users").select("email").or(`username.eq.${s},no_hp.eq.${s}`).single();if(S||!b){o.error("Username/email tidak ditemukan"),i(!1);return}c=b.email}const{error:f}=await h.auth.signInWithPassword({email:c,password:a});if(f){o.error("Login gagal: "+f.message),i(!1);return}const x=await R();if(!x){o.error("User tidak ditemukan di database"),i(!1);return}localStorage.setItem("user",JSON.stringify(x)),o.success("Login berhasil!"),setTimeout(()=>{k("/dashboard")},500)}catch(c){o.error("Terjadi kesalahan saat login"),console.error("Login error:",c)}finally{i(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-r from-blue-900 via-blue-800 to-blue-900 flex items-center justify-center p-4 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-500/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-slate-500/20 rounded-full blur-3xl"})]}),e.jsxs("div",{className:"w-full max-w-md relative z-10",children:[e.jsxs("div",{className:"text-center mb-2",children:[e.jsx("div",{className:"inline-flex items-center justify-center",children:e.jsx("img",{src:"/Components/img/logo app.png",alt:"Logo SIGATAN",className:"w-40 h-40 object-contain drop-shadow-2xl"})}),e.jsx("h1",{className:"text-2xl font-bold text-white mb-2 drop-shadow-lg",style:{marginTop:"-10px"},children:"SIGATAN"}),e.jsx("p",{className:"text-blue-100 text-lg",children:"Sistem Informasi Geospasial Pertanahan"})]}),e.jsxs(g,{className:"border-0 shadow-2xl backdrop-blur-sm bg-white/95",children:[e.jsxs(N,{className:"space-y-1 pb-6 pt-8",children:[e.jsx(j,{className:"text-2xl text-center text-slate-800 font-bold",children:"Selamat Datang"}),e.jsx(w,{className:"text-center text-slate-500",children:"Silakan masuk dengan akun Anda"})]}),e.jsxs(v,{className:"px-8 pb-8",children:[e.jsxs("form",{onSubmit:C,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"username",className:"text-slate-700 font-semibold",children:"Username"}),e.jsxs("div",{className:"relative",children:[e.jsx($,{className:"absolute left-3 top-3.5 h-5 w-5 text-blue-500"}),e.jsx(m,{id:"username",type:"text",placeholder:"Masukkan username",value:s,onChange:n=>r(n.target.value),className:"pl-11 h-12 border-slate-300 focus:border-blue-500 focus:ring-blue-500",required:!0,disabled:d})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(u,{htmlFor:"password",className:"text-slate-700 font-semibold",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(p,{className:"absolute left-3 top-3.5 h-5 w-5 text-blue-500"}),e.jsx(m,{id:"password",type:"password",placeholder:"Masukkan password",value:a,onChange:n=>t(n.target.value),className:"pl-11 h-12 border-slate-300 focus:border-blue-500 focus:ring-blue-500",required:!0,disabled:d})]})]}),e.jsx(y,{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 h-12 text-base font-semibold shadow-lg hover:shadow-xl transition-all duration-200",disabled:d,children:d?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Memproses..."})]}):"Masuk"})]}),e.jsx("div",{className:"mt-6 text-center text-sm text-slate-500",children:e.jsxs("p",{className:"flex items-center justify-center gap-2",children:[e.jsx(p,{className:"w-4 h-4"}),"Login aman dan terenkripsi"]})})]})]}),e.jsx("div",{className:"text-center mt-6 text-sm text-slate-500",children:e.jsx("p",{children:"Â© 2025 andrimamboro web development. All rights reserved."})})]})]})}export{D as default};
//# sourceMappingURL=Login-DAhkfskY.js.map
