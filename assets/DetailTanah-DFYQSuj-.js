import{v as K,j as e,L as c,a0 as $,V as A,J as m,K as i,w as x,R as M,a1 as k,a2 as _,a3 as y,a4 as T,a5 as S,O as C,a6 as U,a7 as F,a8 as q,a9 as I,aa as z,ab as H,W as O,ac as L,ad as P,ae as Q,af as u,ag as E,ah as J}from"./vendor-BKp2tr96.js";import{s as V}from"./db-DOO1oGDP.js";import{C as b,b as h,c as g,a as j,d as W}from"./card-tNNNiwYM.js";import{c as p,B as f}from"./index-C5rwQ5l5.js";import{B as G}from"./badge-DBr3DEm2.js";import{T as X,a as Y,b as Z,c as w}from"./tabs-CFznN0Vn.js";import{T as ee}from"./TanahMap-C-1oJUhj.js";import"./leaflet-C2x5yPDR.js";import"./pdf-DglC5ngP.js";import"./utils-DK2L4Iz5.js";function xe(){const o=new URLSearchParams(window.location.search).get("id"),{data:a,isLoading:D}=K({queryKey:["tanah-detail",o],queryFn:async()=>{if(!o)return null;const{data:l,error:t}=await V.from("tanah").select("*").eq("id",o).single();if(t)throw new Error(t.message);if(l&&l.polygon_coords&&typeof l.polygon_coords=="string")try{l.polygon_coords=JSON.parse(l.polygon_coords)}catch(r){console.error("Failed to parse polygon_coords:",r),l.polygon_coords=null}return l},enabled:!!o}),B=l=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(l||0),d=l=>{if(!l)return"-";try{const t=new Date(l);return isNaN(t.getTime())?"-":E(t,"dd MMMM yyyy",{locale:J})}catch{return"-"}},v=a?.latitude&&a?.longitude?`https://www.google.com/maps?q=${a.latitude},${a.longitude}`:"";if(D)return e.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!a)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-800",children:"Data tidak ditemukan"}),e.jsx(c,{to:p("DataTanah"),children:e.jsx(f,{className:"mt-4",children:"Kembali ke Data Tanah"})})]});const s=({label:l,value:t,icon:r,className:n})=>e.jsxs("div",{className:`p-2 flex items-center py-2 border border-b-4 border-slate-300 rounded-md bg-white mb-2 shadow-sm ${n||""}`,children:[r&&e.jsx(r,{className:"w-4 h-4 text-blue-500 mr-2"}),e.jsx("span",{className:"w-1/3 text-slate-800 text-sm flex items-center font-semibold",children:l}),e.jsx("span",{className:"w-2/3 text-slate-800 font-medium",children:t||"-"})]}),R=({label:l,value:t,icon:r})=>{let n="bg-blue-100 text-blue-800";return t==="Selesai"?n="bg-emerald-100 text-emerald-800":t==="Ditolak"&&(n="bg-red-100 text-red-800"),e.jsxs("div",{className:`p-2 flex items-center py-2 border border-b-4 border-slate-300 rounded-md mb-2 shadow-sm ${n}`,children:[r&&e.jsx(r,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"w-1/3 text-sm flex items-center font-semibold",children:l}),e.jsx("span",{className:"w-2/3 font-medium",children:t||"-"})]})},N=({label:l,value:t,icon:r})=>e.jsxs("div",{className:"flex items-start text-align-start",children:[r&&e.jsx(r,{className:"w-4 h-4 text-emerald-500 mr-2"}),e.jsx("span",{className:"w-1/3 text-slate-500 text-xs ",children:l}),e.jsx("span",{className:"w-2/3 text-slate-500 text-xs ",children:t||"-"})]});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(c,{to:p("DataTanah"),children:e.jsx(f,{variant:"outline",size:"icon",children:e.jsx($,{className:"w-4 h-4"})})}),e.jsx("div",{children:e.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Detail Data Tanah"})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(G,{className:`px-4 py-2 text-sm font-semibold rounded-lg shadow-sm border transition-all duration-200
              ${a.status==="Selesai"?"bg-yellow-500 text-yellow-900 border-yellow":a.status==="Ditolak"?"bg-red-100 text-red-700 border-red-200":a.status==="Proses"?"bg-blue-100 text-blue-700 border-blue-200":"bg-slate-100 text-slate-500 border-slate-200"}
            `,children:a.status||"Proses"}),e.jsx(c,{to:p("Laporan")+`?id=${a.id}`,children:e.jsxs(f,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Cetak Surat"]})}),e.jsx(c,{to:p("FormTanah")+`?id=${a.id}`,children:e.jsxs(f,{className:"bg-orange-500 hover:bg-orange-600",variant:"outline",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536M9 13l6.586-6.586a2 2 0 112.828 2.828L11.828 15.828a4 4 0 01-1.414.828l-4 1a1 1 0 01-1.263-1.263l1-4a4 4 0 01.828-1.414z"})}),"Edit"]})})]})]}),e.jsxs(X,{defaultValue:"pemilik",className:"w-full mb-4",children:[e.jsx(Y,{className:"w-full flex flex-col items-center mb-6 bg-transparent p-0 border-none shadow-none",children:e.jsx("div",{className:"flex w-full max-w-2xl justify-between items-center gap-2",children:[{label:"Pemilik",value:"pemilik",icon:m},{label:"Tanah",value:"tanah",icon:i},{label:"Dokumen",value:"dokumen",icon:x}].map((l,t,r)=>e.jsxs(M.Fragment,{children:[e.jsxs(Z,{value:l.value,className:"flex flex-col items-center flex-1 focus:outline-none group bg-transparent border-none shadow-none p-0 hover:bg-slate-100 transition-all",children:[e.jsx("div",{className:`rounded-full w-8 h-8 flex items-center justify-center font-bold border-2 transition-all duration-200 mb-1
                      bg-gradient-to-b from-slate-900 via-slate-800 to-blue-900 text-white border-blue-900 scale-110 shadow-lg`,children:t+1}),e.jsxs("span",{className:"text-xs font-medium flex items-center gap-1",children:[l.icon&&e.jsx(l.icon,{className:"w-4 h-4"})," ",l.label]})]}),t<r.length-1&&e.jsx("div",{className:"flex-1 h-1 mx-1 rounded bg-gradient-to-r from-slate-900 via-slate-800 to-blue-900"})]},l.value))})}),e.jsx(w,{value:"pemilik",children:e.jsxs(b,{className:"border-0 shadow-md",children:[e.jsx(h,{className:"bg-gradient-to-b from-slate-900 via-slate-800 to-blue-900 text-white rounded-t-lg",children:e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(m,{className:"w-5 h-5"}),"Data Pemilik & Tanah"]})}),e.jsxs(j,{className:"p-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold bg-gradient-to-b from-slate-900 via-slate-800 to-blue-900 text-white rounded-md p-2 mb-4",children:"Pemilik"}),e.jsx(s,{label:"Nama Lengkap",value:a.nama_pemilik,icon:m}),e.jsx(s,{label:"NIK",value:a.nik_pemilik,icon:k}),e.jsx(s,{label:"Umur",value:a.umur_pemilik?`${a.umur_pemilik} Tahun`:"-",icon:_}),e.jsx(s,{label:"Pekerjaan",value:a.pekerjaan_pemilik,icon:y}),e.jsx(s,{label:"Alamat",value:a.alamat_pemilik,icon:T})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold bg-gradient-to-b from-slate-900 via-slate-800 to-blue-900 text-white rounded-md p-2 mb-4",children:"Penerima"}),e.jsx(s,{label:"Nama Penerima",value:a.nama_penerima,icon:m}),e.jsx(s,{label:"Atas Nama",value:a.atas_nama?`${a.atas_nama}`:"-",icon:S}),e.jsx(s,{label:"NIK",value:a.nik_penerima,icon:k}),e.jsx(s,{label:"Umur",value:a.umur_penerima?`${a.umur_penerima} Tahun`:"-",icon:_}),e.jsx(s,{label:"Pekerjaan",value:a.pekerjaan_penerima,icon:y}),e.jsx(s,{label:"Alamat",value:a.alamat_penerima,icon:T})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold bg-gradient-to-b from-slate-900 via-slate-800 to-blue-900 text-white rounded-md p-2 mb-4",children:"Data Tanah"}),e.jsx(s,{label:"Lokasi",value:a.lokasi,icon:i}),e.jsx(s,{label:"Kecamatan",value:a.kecamatan,icon:i}),e.jsx(s,{label:"Kelurahan",value:a.kelurahan,icon:i}),e.jsx(s,{label:"Luas (P x L)",value:a.luas_perkalian,icon:C}),e.jsx(s,{label:"Luas (m²)",value:a.luas_meter?`${a.luas_meter} m²`:"-",icon:C}),e.jsx(s,{label:"Luas Terbilang",value:a.luas_terbilang,icon:x})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-semibold bg-gradient-to-b from-slate-900 via-slate-800 to-blue-900 text-white rounded-md p-2 mb-4",children:"Batas Batas"}),e.jsx(s,{label:"Batas Utara",value:a.batas_utara||"-",icon:U}),e.jsx(s,{label:"Batas Timur",value:a.batas_timur||"-",icon:F}),e.jsx(s,{label:"Batas Selatan",value:a.batas_selatan||"-",icon:q}),e.jsx(s,{label:"Batas Barat",value:a.batas_barat||"-",icon:I}),e.jsx("p",{className:"text-lg font-semibold bg-gradient-to-b from-slate-900 via-slate-800 to-blue-900 text-white rounded-md p-2 mb-4",children:"Transaksi"}),e.jsx(s,{label:"Jenis Transaksi",value:a.transaksi,icon:z}),e.jsx(s,{label:"Harga",value:a.harga?B(a.harga):"-",icon:H}),e.jsx(s,{label:"Harga Terbilang",value:a.harga_terbilang,icon:x})]})]})]})}),e.jsx(w,{value:"tanah",children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs(b,{className:"border-0 shadow-lg",children:[e.jsx(h,{className:"bg-gradient-to-r from-blue-900 to-blue-950 text-white rounded-t-lg",children:e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(i,{className:"w-5 h-5"}),"Lokasi Pada Peta"]})}),a.latitude&&a.longitude&&e.jsx(j,{className:"p-0",children:e.jsx(ee,{tanahList:[a],center:[a.latitude,a.longitude],zoom:16})})]}),v&&e.jsxs(b,{className:"border-0 shadow-lg",children:[e.jsx(h,{children:e.jsxs(g,{className:"flex items-center gap-2 text-slate-800",children:[e.jsx(O,{className:"w-5 h-5 text-blue-600"}),"QR Code Koordinat"]})}),e.jsxs(j,{className:"flex flex-col items-center p-6",children:[e.jsx("img",{src:`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(v)}`,alt:"QR Code Koordinat",className:"mb-4"}),e.jsxs("p",{className:"text-sm text-slate-500",children:["Lat: ",a.latitude,", Long: ",a.longitude]}),e.jsx("a",{href:v,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm mt-2",children:"Buka di Google Maps"})]})]})]})}),e.jsx(w,{value:"dokumen",children:e.jsxs(b,{className:"border-0 shadow-lg",children:[e.jsx(h,{className:"bg-gradient-to-r from-blue-900 to-blue-950 text-white rounded-t-lg",children:e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(x,{className:"w-5 h-5"}),"Data Dokumen"]})}),e.jsxs(j,{className:"p-6 grid grid-cols-2 gap-8 text-bold",children:[e.jsxs("div",{children:[e.jsx(s,{label:"Nomor SKPT",value:a.nomor_skpt,icon:L}),e.jsx(s,{label:"Tanggal SKPT",value:d(a.tanggal_skpt),icon:P}),e.jsx(s,{label:"Nomor Penyerahan",value:a.nomor_penyerahan,icon:L}),e.jsx(s,{label:"Tanggal Penyerahan",value:d(a.tanggal_penyerahan),icon:P}),e.jsx(R,{label:"Status",value:a.status,icon:Q})]}),e.jsxs("div",{children:[e.jsx(s,{label:"Camat",value:a.nama_camat,icon:u}),e.jsx(s,{label:"Lurah",value:a.nama_lurah,icon:u}),e.jsx(s,{label:"Kasi Pemerintahan",value:a.nama_kasi_pemerintahan,icon:u}),e.jsx(s,{label:"Administrasi Kecamatan",value:a.nama_administrasi_kecamatan,icon:u})]})]}),e.jsxs(W,{className:"bg-slate-50 rounded-b-lg gap-6 grid grid-cols-6 align-start",children:[e.jsx(N,{className:"text-xs text-slate-500",label:"Dibuat:",value:d(a.created_date)}),e.jsx(N,{className:"text-xs text-slate-500",label:"Update:",value:d(a.updated_date)}),e.jsx(N,{className:"text-xs text-slate-500",label:"by:",value:a.created_by})]})]})})]})]})}export{xe as default};
//# sourceMappingURL=DetailTanah-DFYQSuj-.js.map
